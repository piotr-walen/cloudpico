<!DOCTYPE html>
<html lang="en">
<head>
  {{ template "head" . }}
</head>
<body>
  {{ template "nav" . }}
  <main class="main">
    <section class="dashboard">
      <h1>Dashboard</h1>
      <p class="lead">Weather stations and readings.</p>
      <div id="stations-container"
           class="stations-container"
           hx-get="/partials/stations"
           hx-trigger="load, every 2s"
           hx-swap="innerHTML">
        {{ with . }}
        {{ range .Stations }}
        <div id="current-conditions-{{ .StationID }}" class="current-conditions card">
          <h2 class="card-title">Current conditions</h2>
          <p class="station-name">{{ .StationName }}</p>
          {{ if .Reading }}
          <p class="reading-value">{{ printf "%.1f" .Reading.Value }}Â°C</p>
          <p class="reading-extra">
            <span class="reading-humidity">{{ printf "%.0f" .Reading.HumidityPct }}% humidity</span>
            <span class="reading-pressure">{{ printf "%.0f" .Reading.PressureHpa }} hPa</span>
          </p>
          <p class="reading-time" title="{{ .Reading.Time.Format "2006-01-02T15:04:05Z07:00" }}">Updated {{ .Reading.Time.Format "3:04 PM" }}</p>
          {{ else }}
          <p class="no-data">No recent reading</p>
          {{ end }}
        </div>
        {{ end }}
        {{ end }}
      </div>
    </section>
  </main>
</body>
</html>
